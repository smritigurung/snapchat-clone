(this["webpackJsonpsnapchat-clone"]=this["webpackJsonpsnapchat-clone"]||[]).push([[0],{100:function(e,t,c){},101:function(e,t,c){},102:function(e,t,c){},103:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(29),i=c.n(s),r=(c(84),c(59)),o=c.n(r),l=c(48),j=c.n(l),u=c(13),d=c(37),h=Object(d.b)({name:"camera",initialState:{cameraImage:null},reducers:{setCameraImage:function(e,t){e.cameraImage=t.payload},resetCameraImage:function(e){e.cameraImage=null}}}),b=h.actions,m=b.setCameraImage,p=b.resetCameraImage,O=function(e){return e.camera.cameraImage},f=h.reducer,g=c(11),x=(c(88),c(4)),v={width:250,height:400,facingMode:"user"};var _=function(){var e=Object(a.useRef)(null),t=Object(u.b)(),c=Object(g.f)(),n=Object(a.useCallback)((function(){var a=e.current.getScreenshot();t(m(a)),c.push("/preview")}),[e]);return Object(x.jsxs)("div",{className:"webcamCapture",children:[Object(x.jsx)(o.a,{audio:!1,height:v.height,ref:e,screenshotFormat:"image/jpeg",width:v.width,videoConstraints:v}),Object(x.jsx)(j.a,{className:"webcamCapture__button",onClick:n,fontSize:"large"})]})},w=(c(92),c(64)),N=c.n(w),I=c(65),k=c.n(I),C=c(66),S=c.n(C),y=c(67),P=c.n(y),B=c(68),U=c.n(B),R=c(69),z=c.n(R),E=c(70),A=c.n(E),D=c(71),F=c.n(D),T=c(72),W=c.n(T),L=c(120),K=c(34),V=K.a.initializeApp({apiKey:"AIzaSyBXnSj8_whRD2LKkI-uXwEZKSRnBYQ66Wk",authDomain:"snapchat-clone-37497.firebaseapp.com",projectId:"snapchat-clone-37497",storageBucket:"snapchat-clone-37497.appspot.com",messagingSenderId:"717367110986",appId:"1:717367110986:web:1ce331f206f610d7a525b3"}).firestore(),J=K.a.auth(),M=K.a.storage(),X=new K.a.auth.GoogleAuthProvider,G=Object(d.b)({name:"app",initialState:{user:null,selectedImage:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null},selectImage:function(e,t){e.selectedImage=t.payload},resetImage:function(e){e.selectedImage=null}}}),Q=G.actions,Y=Q.login,Z=Q.logout,$=Q.selectImage,q=(Q.resetImage,function(e){return e.app.user}),H=function(e){return e.app.selectedImage},ee=G.reducer;var te=function(){var e=Object(u.c)(O),t=Object(g.f)(),c=Object(u.b)(),n=Object(u.c)(q);return Object(a.useEffect)((function(){e||t.replace("/")}),[e,t]),Object(x.jsxs)("div",{className:"preview",children:[Object(x.jsx)(N.a,{onClick:function(){c(p())},className:"preview__close"}),Object(x.jsxs)("div",{className:"preview__toolbarRight",children:[Object(x.jsx)(k.a,{}),Object(x.jsx)(S.a,{}),Object(x.jsx)(P.a,{}),Object(x.jsx)(U.a,{}),Object(x.jsx)(z.a,{}),Object(x.jsx)(A.a,{}),Object(x.jsx)(F.a,{})]}),Object(x.jsx)("img",{src:e,alt:""}),Object(x.jsxs)("div",{onClick:function(){var c=Object(L.a)();M.ref("posts/".concat(c)).putString(e,"data_url").on("state_changed",null,(function(e){console.log(e)}),(function(){M.ref("posts").child(c).getDownloadURL().then((function(e){V.collection("posts").add({imageUrl:e,username:n.username,read:!1,profilePic:n.profilePic,timestamp:K.a.firestore.FieldValue.serverTimestamp()}),t.replace("/chats")}))}))},className:"preview__footer",children:[Object(x.jsx)("h2",{children:"Send Now"}),Object(x.jsx)(W.a,{fontSize:"small",className:"preview__sendIcon"})]})]})},ce=c(31),ae=c(43),ne=c(121),se=(c(98),c(74)),ie=c.n(se),re=c(75),oe=c.n(re),le=(c(99),c(73)),je=c.n(le),ue=c(77);var de=function(e){var t=e.id,c=e.username,a=e.timestamp,n=e.read,s=e.imageUrl,i=e.profilePic,r=Object(u.b)(),o=Object(g.f)();return Object(x.jsxs)("div",{onClick:function(){n||(r($(s)),V.collection("posts").doc(t).set({read:!0},{merge:!0}),o.push("/chats/view"))},className:"chat",children:[Object(x.jsx)(ne.a,{className:"chat__avatar",src:i}),Object(x.jsxs)("div",{className:"chat__info",children:[Object(x.jsx)("h4",{children:c}),Object(x.jsxs)("p",{children:[!n&&"Tap to view -"," ",Object(x.jsx)(ue.a,{date:new Date(null===a||void 0===a?void 0:a.toDate()).toUTCString()})]})]}),!n&&Object(x.jsx)(je.a,{className:"chat__readIcon"})]})};var he=function(){var e=Object(a.useState)([]),t=Object(ae.a)(e,2),c=t[0],n=t[1],s=Object(u.c)(q),i=Object(u.b)(),r=Object(g.f)();return Object(a.useEffect)((function(){V.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(x.jsxs)("div",{className:"chats",children:[Object(x.jsxs)("div",{className:"chats__header",children:[Object(x.jsx)(ne.a,{src:s.profilePic,onClick:function(){return J.signOut()},className:"chats__avatar"}),Object(x.jsxs)("div",{className:"chats__search",children:[Object(x.jsx)(ie.a,{className:"chats__searchIcon"}),Object(x.jsx)("input",{placeholder:"Friends",type:"text"})]}),Object(x.jsx)(oe.a,{className:"chats__chatIcon"})]}),Object(x.jsx)("div",{className:"chats__posts",children:c.map((function(e){var t=e.id,c=e.data,a=c.profilePic,n=c.username,s=c.timestamp,i=c.imageUrl,r=c.read;return Object(x.jsx)(de,{id:t,username:n,timestamp:s,imageUrl:i,read:r,profilePic:a},t)}))}),Object(x.jsx)(j.a,{className:"chats__takePicIcon",onClick:function(){i(p()),r.push("/")},fontSize:"large"})]})},be=(c(100),c(101),c(76));var me=function(){var e=Object(u.c)(H),t=Object(g.f)();Object(a.useEffect)((function(){e||c()}),[e]);var c=function(){t.replace("./chats")};return Object(x.jsxs)("div",{className:"chatView",children:[Object(x.jsx)("img",{src:e,onClick:c,alt:""}),Object(x.jsx)("div",{className:"chatView__timer",children:Object(x.jsx)(be.CountdownCircleTimer,{isPlaying:!0,duration:10,strokeWidth:6,size:50,colors:[["#004777",.33],["#F7B801",.33],["#A30000",.33]],children:function(e){var t=e.remainingTime;return 0===t&&c(),t}})})]})},pe=(c(102),c(119));var Oe=function(){var e=Object(u.b)();return Object(x.jsx)("div",{className:"login",children:Object(x.jsxs)("div",{className:"login__container",children:[Object(x.jsx)("img",{src:"https://scx2.b-cdn.net/gfx/news/2017/1-snapchat.jpg",alt:""}),Object(x.jsx)(pe.a,{variant:"outlined",onClick:function(){J.signInWithPopup(X).then((function(t){e(Y({username:t.user.displayName,profilePic:t.user.photoURL,id:t.user.uid}))})).catch((function(e){return alert(e.message)}))},children:"Sign in"})]})})};var fe=function(){var e=Object(u.c)(q),t=Object(u.b)();return Object(a.useEffect)((function(){J.onAuthStateChanged((function(e){t(e?Y({username:e.displayName,profilePic:e.photoURL,id:e.uid}):Z())}))}),[]),Object(x.jsx)("div",{className:"app",children:Object(x.jsx)(ce.a,{basename:"/snapchat-clone/",children:e?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("img",{className:"app__logo",src:"https://lakeridgenewsonline.com/wp-content/uploads/2020/04/snapchat.jpg",alt:""}),Object(x.jsx)("div",{className:"app__body",children:Object(x.jsx)("div",{className:"app__bodyBackground",children:Object(x.jsxs)(g.c,{children:[Object(x.jsx)(g.a,{path:"/chats/view",children:Object(x.jsx)(me,{})}),Object(x.jsx)(g.a,{path:"/chats",children:Object(x.jsx)(he,{})}),Object(x.jsx)(g.a,{path:"/preview",children:Object(x.jsx)(te,{})}),Object(x.jsx)(g.a,{exact:!0,path:"/",children:Object(x.jsx)(_,{})})]})})})]}):Object(x.jsx)(Oe,{})})})},ge=Object(d.a)({reducer:{app:ee,camera:f}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(u.a,{store:ge,children:Object(x.jsx)(fe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},84:function(e,t,c){},88:function(e,t,c){},92:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[103,1,2]]]);
//# sourceMappingURL=main.92fa1953.chunk.js.map